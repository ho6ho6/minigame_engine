# minigame_engine

## 設計思想
- C++ および Win32 API をベースに、メインウィンドウの生成と、game・scene・input などのサブウィンドウの管理を行うミニゲームエンジンを構築。
- ユーザーはソースコードを記述することなく、シーン上に配置されたオブジェクトに対してキー割り当てを選択することでキャラクターを制御できる。
- 条件分岐や挙動の変化は、Component を追加することで制御可能とし、ノードベースの拡張性ある設計を目指す。

### 実際にminigame_engineを用いてゲームを作成する時
- ユーザは「大乱闘スマッシュブラザーズ｣にある｢ステージ作り｣のように、元々ある地形・動くものなどをAssetsウィンドウから選択して、ステージを作成する。
- 空のオブジェクトをステージに置くことで、フラグ設定を行う。
- 各オブジェクトに個別で条件を付けれるようにし、ギミックに自由度を持たせる。

# 開発環境
- C++
- CMake
- Visual Studio 2022

# 開発の流れ
## 初期段階
1. メインループ -> ゲームの時間管理・更新・描画
2. 入力処理 -> 入力イベントの取得・処理
3. 描画処理 -> 画面にオブジェクト生成
4. ウィンドウ管理 -> アプリケーションウィンドウの生成・イベント処理

- 現状1 --> 描画されているフレーム数とタイム、文字の表示のみ </br>
![minigame_engine](./img/minigame_engine1.png)

- 現状2 --> ImGuiモジュールを用いたWindow分割(これがWindow_scene{UnityならばHierarchy}などのサブウィンドウになる) </br>
![minigame_engine](./img/minigame_engine2.png)

- 現状3 --> サブウィンドウの描画を行った。</br>
![minigame_engine](./img/minigame_engine3.png)

## 中期以降
5. リソース管理 -> アセットの読み込み・管理
6. シーン管理 -> オブジェクトの配置・状態管理

- 現状4 --> リソース管理を完了 </br>
![minigame_engine](./img/minigame_engine4.png)

- 現状5 --> Assetをscene上に配置を完了(描画は取り組み中) </br>
![minigame_engine](./img/minigame_engine5.png)

- 現状6 --> オブジェクトの配置完了、座標がオブジェクト固有の座標とシーンの座標とでズレているため見直す必要がある。</br>
![minigame_engine](./img/minigame_engine6.gif)

- 現状7 --> アセットオブジェクトの座標処理とwindow_sceneでの座標処理を統一し、不整合を無くした。</br>
配置されたアセットに対しての個別処理(位置調整/選択/削除)を実装した。</br>
![minigame_engine](./img/minigame_engine7.gif)

## 終盤
7. 物理演算 -> 衝突判定・力の計算  (ゲームとして違和感ないような物理演算を自動的に行いたい)
8. サウンド管理 -> 効果音・BGMの再生  (エンジン内で音の再生を分かりやすく行いたい)

## 現在取り組み中
- window_hierarchyにwindow_sceneに配置されたAssetの情報を渡す。
- window_gameにwindow_sceneに描画されている部分のみを抽出し、描画する。

## 更新履歴
2025/08/21 サブウィンドウ関連の煩雑なモジュール群を全て一掃し、簡潔にまとめた</br>
2025/08/29 ImGuiモジュールによるウィンドウ分割を確認できたので、サブウィンドウ処理の共通化を行った</br>
2025/09/06 window_sceneに座標系を表示し、window_assetsにテクスチャを表示した</br>
2025/10/29 Assetをwindow_sceneに配置を行った。描画はまだである。</br>
2025/11/12 任意のオブジェクトをwidnow_scene上に配置できるようになった。</br>
2025/12/03 window_sceneに関するAssets処理は大方作り上げた。</br>
